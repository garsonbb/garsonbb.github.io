<!doctype html><html lang=zh-hans>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=HandheldFriendly content="True">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=generator content="Hugo 0.86.0">
<link rel="shortcut icon" href=https://pic.garnote.top/2021/08/11/eeb6915d14722.ico>
<title>Ubuntu下使用Clion+STM32CubeMx+OpenOCD进行开发 - 梦渡</title>
<meta name=author content="Garson">
<meta name=description content="Garson的私人博客">
<meta name=keywords content="STM32">
<meta property="og:title" content="Ubuntu下使用Clion+STM32CubeMx+OpenOCD进行开发">
<meta name=twitter:title content="Ubuntu下使用Clion+STM32CubeMx+OpenOCD进行开发">
<meta property="og:type" content="article">
<meta property="og:url" content="https://garnote.top/post/stm32_clion/"><meta property="og:description" content>
<meta name=twitter:description content><meta name=twitter:card content="summary"><meta property="article:published_time" content="2019-12-13T18:15:00+00:00"><meta property="article:modified_time" content="2019-12-13T18:15:00+00:00">
<style>@media(prefers-color-scheme:dark){body[data-theme=auto] img{filter:brightness(60%)}}body[data-theme=dark] img{filter:brightness(60%)}</style>
<link rel=stylesheet href=https://garnote.top/assets/css/fuji.min.css>
</head>
<body data-theme=auto data-theme-auto=true>
<script data-cfasync=false>var fujiThemeData=localStorage.getItem('fuji_data-theme');fujiThemeData?fujiThemeData!=='auto'&&document.body.setAttribute('data-theme',fujiThemeData==='dark'?'dark':'light'):localStorage.setItem('fuji_data-theme','auto')</script>
<header>
<div class="container-lg clearfix">
<div class="col-12 header">
<a class=title-main href=https://garnote.top>梦渡</a>
<span class=title-sub>Garson's Note</span>
</div>
</div>
</header>
<main>
<div class="container-lg clearfix">
<div class="col-12 col-md-9 float-left content">
<article>
<h2 class="post-item post-title">
<a href=https://garnote.top/post/stm32_clion/>Ubuntu下使用Clion+STM32CubeMx+OpenOCD进行开发</a>
</h2>
<div class="post-item post-meta">
<span><i class="iconfont icon-today-sharp"></i>&nbsp;2019-12-13</span>
<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;648 字</span>
<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href=/tags/stm32>STM32</a>&nbsp;</span>
</div>
<div class="post-content markdown-body">
<h2 id=clion>Clion</h2>
<ol>
<li><a href="http://www.jetbrains.com/clion/download/#section=linux" target=_blank>下载地址</a></li>
<li>利用edu邮箱可以申请免费授权，一年一申。<a href=https://www.jetbrains.com/zh/student/ target=_blank>传送门</a></li>
<li>解压之后在源码目录执行<code>sudo ./clion-2019.3/bin/clion.sh</code>安装。</li>
</ol>
<h2 id=stm32cubemx>STM32CubeMx</h2>
<ol>
<li>安装jre.<code>sudo apt install default-jre</code>.</li>
<li>下载<a href=https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-configurators-and-code-generators/stm32cubemx.html#overview target=_blank>STM32CubeMx</a>.</li>
<li>解压之后进入目录执行<code>sudo ./SetupSTM32CubeMX-5.4.0.linux</code>安装(要先给这个文件加上可执行权限)。</li>
</ol>
<h2 id=arm-none-eabi-gcc>arm-none-eabi-gcc</h2>
<ol>
<li>下载<a href=https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads target=_blank>arm-none-eabi-gcc</a></li>
<li>解压到<code>/usr/lib/gcc</code>.</li>
<li><code>vi /etc/profile</code>
在最后一行加入<code>export PATH=$PATH:/usr/lib/gcc/gcc-arm-none-eabi-9-2019-q4-major/bin</code>注意修改目录位置.</li>
<li>重启生效PATH</li>
</ol>
<h2 id=openocd>OpenOCD</h2>
<ol>
<li>OpenOCD代码托管在这里，选择最新版本下载<a href=https://sourceforge.net/projects/openocd/files/openocd/ target=_blank>https://sourceforge.net/projects/openocd/files/openocd/</a></li>
<li>解压，进入源码目录</li>
<li><code>./configure -help</code>可查看帮助</li>
<li><code>./bootstrap</code>生成配置文件</li>
<li><code>./configure --enable jlink</code>添加jlink支持，可能会提示缺少什么库，按提示安装</li>
<li><code>sudo make && make install</code>安装。重启生效PATH</li>
<li>在源码目录下<code>sudo cp contrib/60-openocd.rules /etc/udev/rule.d/</code>
<strong>不进行这部操作的话，在非root用户下运行Clion时，Clion会无权访问调试器。</strong></li>
</ol>
<h2 id=最后>最后</h2>
<p>运行Clion，在Plugins中搜索<code>stm32</code>并安装第一个插件，重启Clion。New Project 选STM32CubeMX。在STM32CubeMX的Project Settings中，将Toolchain/IDE选成SW4STM32。最后Generate Code.
Enjoy it.</p>
</div>
</article>
<div class="license markdown-body">
<blockquote>
<p>除特殊注明部分，本站内容采用 <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a> 进行许可。</p>
</blockquote>
</div>
<div id=tcomment></div>
<script src=https://cdn.jsdelivr.net/npm/twikoo@1.4.4/dist/twikoo.all.min.js></script>
<script>twikoo.init({envId:'https://my-twikoo.vercel.app/',el:'#tcomment'})</script>
</div>
<aside class="col-12 col-md-3 float-left sidebar">
<div class="sidebar-item sidebar-pages">
<h3>页面</h3>
<ul>
<li>
<a href=/>Home</a>
</li>
<li>
<a href=/archives/>Archives</a>
</li>
<li>
<a href=/board/>Board</a>
</li>
<li>
<a href=/about/>About</a>
</li>
<li>
<a href=/search/>Search</a>
</li>
<li>
<a href=/index.xml>RSS</a>
</li>
</ul>
</div>
<div class="sidebar-item sidebar-links">
<h3>链接</h3>
<ul>
<li>
<a href=https://github.com/garsonbb target=_blank><span>GitHub</span></a>
</li>
<li>
<a href=https://space.bilibili.com/12225878 target=_blank><span>Bilibili</span></a>
</li>
<li>
<a href=mailto:z1195224900@gmail.com target=_blank><span>Email</span></a>
</li>
</ul>
</div>
<div class="sidebar-item sidebar-tags">
<h3>标签</h3>
<div>
<span>
<a href=/tags/clion/>Clion</a>
</span>
<span>
<a href=/tags/diy/>DIY</a>
</span>
<span>
<a href=/tags/nas/>Nas</a>
</span>
<span>
<a href=/tags/stm32/>STM32</a>
</span>
<span>
<a href=/tags/unraid/>Unraid</a>
</span>
<span>
<a href=/tags/%E6%8E%A7%E5%88%B6/>控制</a>
</span>
<span>
<a href=/tags/%E6%91%84/>摄</a>
</span>
<span>
<a href=/tags/%E6%97%A5%E5%B8%B8/>日常</a>
</span>
<span>
<a href=/tags/%E6%9D%82/>杂</a>
</span>
</div>
</div>
<div class="sidebar-item sidebar-toc">
<h3>目录</h3><nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#clion>Clion</a></li>
<li><a href=#stm32cubemx>STM32CubeMx</a></li>
<li><a href=#arm-none-eabi-gcc>arm-none-eabi-gcc</a></li>
<li><a href=#openocd>OpenOCD</a></li>
<li><a href=#最后>最后</a></li>
</ul>
</li>
</ul>
</nav></div>
</aside>
</div>
<div class=btn>
<div class=btn-menu id=btn-menu>
<i class="iconfont icon-grid-sharp"></i>
</div>
<div class=btn-toggle-mode>
<i class="iconfont icon-contrast-sharp"></i>
</div>
<div class=btn-scroll-top>
<i class="iconfont icon-chevron-up-circle-sharp"></i>
</div>
</div>
<aside class=sidebar-mobile style=display:none>
<div class=sidebar-wrapper>
<div class="sidebar-item sidebar-pages">
<h3>页面</h3>
<ul>
<li>
<a href=/>Home</a>
</li>
<li>
<a href=/archives/>Archives</a>
</li>
<li>
<a href=/board/>Board</a>
</li>
<li>
<a href=/about/>About</a>
</li>
<li>
<a href=/search/>Search</a>
</li>
<li>
<a href=/index.xml>RSS</a>
</li>
</ul>
</div>
<div class="sidebar-item sidebar-links">
<h3>链接</h3>
<ul>
<li>
<a href=https://github.com/garsonbb target=_blank><span>GitHub</span></a>
</li>
<li>
<a href=https://space.bilibili.com/12225878 target=_blank><span>Bilibili</span></a>
</li>
<li>
<a href=mailto:z1195224900@gmail.com target=_blank><span>Email</span></a>
</li>
</ul>
</div>
<div class="sidebar-item sidebar-tags">
<h3>标签</h3>
<div>
<span>
<a href=/tags/clion/>Clion</a>
</span>
<span>
<a href=/tags/diy/>DIY</a>
</span>
<span>
<a href=/tags/nas/>Nas</a>
</span>
<span>
<a href=/tags/stm32/>STM32</a>
</span>
<span>
<a href=/tags/unraid/>Unraid</a>
</span>
<span>
<a href=/tags/%E6%8E%A7%E5%88%B6/>控制</a>
</span>
<span>
<a href=/tags/%E6%91%84/>摄</a>
</span>
<span>
<a href=/tags/%E6%97%A5%E5%B8%B8/>日常</a>
</span>
<span>
<a href=/tags/%E6%9D%82/>杂</a>
</span>
</div>
</div>
<div class="sidebar-item sidebar-toc">
<h3>目录</h3>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#clion>Clion</a></li>
<li><a href=#stm32cubemx>STM32CubeMx</a></li>
<li><a href=#arm-none-eabi-gcc>arm-none-eabi-gcc</a></li>
<li><a href=#openocd>OpenOCD</a></li>
<li><a href=#最后>最后</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</aside>
</main>
<footer>
<div class="container-lg clearfix">
<div class="col-12 footer">
<span>&copy; 2019-2021
<a href=https://garnote.top>Garson</a>
| <a href=https://github.com/dsrkafuu/hugo-theme-fuji>Source code</a>
| 基于 <a href=https://github.com/dsrkafuu/hugo-theme-fuji/ target=_blank>Fuji-v2</a> & <a href=https://gohugo.io/ target=_blank>Hugo</a> 构建
</span>
</div>
</div>
</footer>
<script defer src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js></script>
<script defer src=/assets/js/fuji.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
</body>
</html>